<Project>
  <Target Name="HackReplaceWronglySelectedRefAssembliesWithActualLibrariesBug1162" AfterTargets="_ResolveAssemblies">
    <ItemGroup>
      <AssembliesRefWorkaroundWindows Include="@(ResolvedAssemblies->Replace('\ref\netstandard2.0\','\lib\netstandard2.0\'))" />
      <AssembliesRefWorkaroundUnix Include="@(ResolvedAssemblies->Replace('/ref/netstandard2.0/','/lib/netstandard2.0/'))" />
      <AssembliesRefWorkaround Include="@(AssembliesRefWorkaroundWindows)" Condition="@(AssembliesRefWorkaroundWindows) != @(ResolvedAssemblies)" />
      <AssembliesRefWorkaround Include="@(AssembliesRefWorkaroundUnix)" Condition="@(AssembliesRefWorkaroundUnix) != @(ResolvedAssemblies)" />
      <ResolvedAssemblies Remove="@(ResolvedAssemblies)" />
      <ResolvedAssemblies Include="@(AssembliesRefWorkaround)" />
      <AssembliesRefWorkaround Remove="@(AssembliesRefWorkaround)" />
      <AssembliesRefWorkaroundWindows Remove="@(AssembliesRefWorkaroundWindows)" />
      <AssembliesRefWorkaroundUnix Remove="@(AssembliesRefWorkaroundUnix)" />
    </ItemGroup>
  </Target>
</Project>
